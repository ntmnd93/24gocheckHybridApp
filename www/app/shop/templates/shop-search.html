<ion-view view-title="{{ 'shop.title_shop_search' | i18n }}">

  <ion-content has-subheader>
    <item-search></item-search>
    <div class="mysegment" ng-hide="checking">
      <ion-segment class="search-segment" ng-model="categories" full="true" assertive>
        <ion-segment-button value="nearby">
          <i class="ion-android-locate"></i>
          <span>{{'shop.item_tabs_near' | i18n}}</span>
        </ion-segment-button>
        <ion-segment-button value="category">
          <i class="ion-ios-list-outline"></i>
          <span>{{'shop.item_tabs_cate' | i18n}}</span>
        </ion-segment-button>
        <ion-segment-button value="city">
          <i class="ion-ios-location-outline"></i>
          <span>{{'shop.item_tabs_city' | i18n}}</span>
        </ion-segment-button>
      </ion-segment>
      <div ng-switch="categories">
        <ion-list ng-switch-when="nearby">
          <ion-item>

          </ion-item>
        </ion-list>
        <ion-list ng-switch-when="category">
          <ion-item>
            <div class="list">
              <!--<label class="item item-input item-select">-->
                <!--<div class="input-label">-->
                  <!--{{'shop.item_tabs_cate' | i18n}}-->
                <!--</div>-->
                <!--<category-list thumbnail="false" mode="options" selected-category="selectedCategory"></category-list>-->
              <!--</label>-->


              <label class="item item-input item-select">
                <div class="input-label" i18n="modals.register_country"></div>
                <select ng-model="selectedCat" ng-change="changeCategory(selectedCat)">
                  <option ng-repeat="category in cates"
                          ng-selected="selectedCat == category.category_id"
                          ng-value="category.category_id">{{::category.name}}
                  </option>
                </select>
              </label>
              <p>Selected Category {{selectedCat}}</p>
            </div>
            <div class="list">
              <div ng-repeat="item in items" class="item-product"
                   style="margin-bottom: 10px; border-radius: 5px; padding: 5px">
                <a class="row" href="#" style="height: 120px; width: 100%">
                  <div class="col-35">
                    <img preload-image class="full-image" ng-src="{{item.thumb}}"
                         default-image="app/shop/images/placeholder.png"
                         fallback-image="app/shop/images/placeholder.png"/>
                    <span class="badge badge-assertive" ng-if="item.off" i18n="shop.off"
                          data-percent="{{item.off}}"></span>
                  </div>
                  <div style="width: 70%;" class="row detail-item-product">
                    <div style="border-top: 9px;width: 90%; margin:0 10px;">
                      <div>
                        <h2 style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            ng-bind-html="item.name"></h2>
                        <span style="color:#dd978f;" ng-class="{'has-special' : item.special}">{{::item.price}}</span>
                        <span ng-if="item.special != item.mobile_special && item.mobile_special"
                              class="mobile-offer-items">
            <i class="icon ion-iphone"></i> {{::item.mobile_special}}
                        </span>
                        <span class="badge badge-assertive" ng-if="item.off" i18n="shop.off"
                              data-percent="{{item.off}}"></span>
                      </div>
                      <hr style="width: 100%;"/>
                      <div>
                        <img style="margin-top: 5px; height: 25px;" class="icon-image"
                             src="http://alvietjs.com/wp-content/uploads/2016/05/photo_2017-07-01_11-18-59-1.jpg"
                             default-image="app/shop/images/placeholder.png"
                             fallback-image="app/shop/images/placeholder.png"/>
                        <div style="margin-top: -10px;">Cong ty AlvietJS</div>
                        <ionic-ratings class="col-33" style="font-size: 12px; white-space: nowrap; margin-top: -5px;"
                                       ratingsobj="{rating : item.rating, readOnly : true,iconOn: 'ion-ios-star', iconOff: 'ion-ios-star-outline', minRating : 1,iconOnColor: '#FEBA19', iconOffColor: 'rgb(255, 204, 0)'}"></ionic-ratings>
                        <!--<button analytics-click="Wishlist" data-product-name="{{item.name}}"-->
                        <!--class="col-20 button button-full button-clear item-price-button"-->
                        <!--style="margin-top: -30px; float: right;" ng-click="addToWishlist(item.product_id)">-->
                        <!--<i class="icon ion-ios-heart-outline"> 14</i>-->
                        <!--</button>-->
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </ion-item>
        </ion-list>
        <ion-list ng-switch-when="city">
          <ion-item>
            <div class="list">
              <!--<label class="item item-input item-select">-->
                <!--<div class="input-label">-->
                  <!--{{'shop.item_tabs_city' | i18n}}-->
                <!--</div>-->
                <!--<select>-->
                  <!--<option selected>{{'shop.item_tabs_city' | i18n}}</option>-->
                  <!--<option>Hà Nội</option>-->
                  <!--<option>Đà Nẵng</option>-->
                  <!--<option>TP Hồ Chí Minh</option>-->
                <!--</select>-->
              <!--</label>-->
              <label class="item item-input item-select">
                <div class="input-label" i18n="modals.register_country"></div>
                <select ng-model="register.country_id" ng-init="search.country_id = '230'" ng-change="countryChanged()"
                        name="country_id" required>
                  <option value="{{::country.country_id}}" ng-selected="country.country_id == register.country_id"
                          ng-repeat="country in countries">{{::country.name}}
                  </option>
                </select>
              </label>
              <label class="item item-input item-select">
                <div class="input-label" i18n="modals.register_region"></div>
                <select ng-model="zone_id" name="zone_id" required ng-init="countryChanged()">
                  <option value="{{::zone.zone_id}}" ng-selected="zone.zone_id == search.zone_id" ng-repeat="zone in zones">
                    {{::zone.name}}
                  </option>
                </select>
              </label>


            </div>
            <div class="list">
              <div ng-repeat="item in data.latestItems" class="item-product"
                   style="margin-bottom: 10px; border-radius: 5px; padding: 5px">
                <a class="row" href="#" style="height: 120px; width: 100%">
                  <div class="col-35">
                    <img preload-image class="full-image" ng-src="{{item.thumb}}"
                         default-image="app/shop/images/placeholder.png"
                         fallback-image="app/shop/images/placeholder.png"/>
                    <span class="badge badge-assertive" ng-if="item.off" i18n="shop.off"
                          data-percent="{{item.off}}"></span>
                  </div>
                  <div style="width: 70%;" class="row detail-item-product">
                    <div style="border-top: 9px;width: 90%; margin:0 10px;">
                      <div>
                        <h2 style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"
                            ng-bind-html="item.name"></h2>
                        <span style="color:#dd978f;" ng-class="{'has-special' : item.special}">{{::item.price}}</span>
                        <span ng-if="item.special != item.mobile_special && item.mobile_special"
                              class="mobile-offer-items">
                            <i class="icon ion-iphone"></i> {{::item.mobile_special}}
                        </span>
                        <span class="badge badge-assertive" ng-if="item.off" i18n="shop.off"
                              data-percent="{{item.off}}"></span>
                      </div>
                      <hr style="width: 100%;"/>
                      <div>
                        <img style="margin-top: 5px; height: 25px;" class="icon-image"
                             src="http://alvietjs.com/wp-content/uploads/2016/05/photo_2017-07-01_11-18-59-1.jpg"
                             default-image="app/shop/images/placeholder.png"
                             fallback-image="app/shop/images/placeholder.png"/>
                        <div style="margin-top: -10px;">Cong ty AlvietJS</div>
                        <ionic-ratings class="col-33" style="font-size: 12px; white-space: nowrap; margin-top: -5px;"
                                       ratingsobj="{rating : item.rating, readOnly : true,iconOn: 'ion-ios-star', iconOff: 'ion-ios-star-outline', minRating : 1,iconOnColor: '#FEBA19', iconOffColor: 'rgb(255, 204, 0)'}"></ionic-ratings>
                        <!--<button analytics-click="Wishlist" data-product-name="{{item.name}}"-->
                        <!--class="col-20 button button-full button-clear item-price-button"-->
                        <!--style="margin-top: -30px; float: right;" ng-click="addToWishlist(item.product_id)">-->
                        <!--<i class="icon ion-ios-heart-outline"> 14</i>-->
                        <!--</button>-->
                      </div>
                    </div>
                  </div>
                </a>
              </div>
            </div>
          </ion-item>
        </ion-list>
      </div>
    </div>
  </ion-content>
</ion-view>
